# -----------------------------------------------------------------------------
# 1. Root Logger (The Catch-All)
# -----------------------------------------------------------------------------
rootLogger.level = INFO

# Destination 1: Console (Docker Logs)
rootLogger.appenderRef.console.ref = ConsoleAppender

# Destination 2: Default Flink Log (Flink Web UI)
rootLogger.appenderRef.rolling.ref = RollingFileAppender

# Destination 3: Your Custom File (inference_job.log)
rootLogger.appenderRef.custom.ref = CustomAppender

# -----------------------------------------------------------------------------
# 2. Specific Loggers (Silence Wayeb & Control User Code)
# -----------------------------------------------------------------------------

# --- MUTE WAYEB (Set to WARN or ERROR to hide INFO logs) ---
logger.wayeb_stream.name = stream
logger.wayeb_stream.level = WARN

logger.wayeb_fsm.name = fsm
logger.wayeb_fsm.level = WARN

logger.wayeb_model.name = model
logger.wayeb_model.level = WARN

logger.wayeb_workflow.name = workflow
logger.wayeb_workflow.level = WARN

# --- YOUR CODE (Keep at INFO) ---
logger.rtcef.name = edu.insa_lyon.streams.rtcef_flink
logger.rtcef.level = INFO
logger.rtcef.additivity = true

# --- FLINK & PYTHON (Keep at INFO/WARN) ---
logger.python.name = org.apache.flink.python
logger.python.level = INFO
logger.flink.name = org.apache.flink
logger.flink.level = INFO

# -----------------------------------------------------------------------------
# 3. Appender Definitions
# -----------------------------------------------------------------------------

# A. Console Appender (For Docker)
appender.console.name = ConsoleAppender
appender.console.type = CONSOLE
appender.console.layout.type = PatternLayout
appender.console.layout.pattern = %d{yyyy-MM-dd HH:mm:ss,SSS} %-5p %-60c %x - %m%n

# B. Flink Default Appender (For Web UI - Uses ${sys:log.file})
appender.rolling.name = RollingFileAppender
appender.rolling.type = RollingFile
appender.rolling.fileName = ${sys:log.file}
appender.rolling.filePattern = ${sys:log.file}.%i
appender.rolling.layout.type = PatternLayout
appender.rolling.layout.pattern = %d{yyyy-MM-dd HH:mm:ss,SSS} %-5p %-60c %x - %m%n
appender.rolling.policies.type = Policies
appender.rolling.policies.size.type = SizeBasedTriggeringPolicy
appender.rolling.policies.size.size = 100MB
appender.rolling.strategy.type = DefaultRolloverStrategy
appender.rolling.strategy.max = 10

# C. Custom Appender (For your specific file)
appender.custom.name = CustomAppender
appender.custom.type = RollingFile
appender.custom.fileName = /opt/flink/log/inference_job.log
appender.custom.filePattern = /opt/flink/log/inference_job.%i.log.gz
appender.custom.layout.type = PatternLayout
appender.custom.layout.pattern = %d{yyyy-MM-dd HH:mm:ss,SSS} %-5p %-60c %x - %m%n
appender.custom.policies.type = Policies
appender.custom.policies.size.type = SizeBasedTriggeringPolicy
appender.custom.policies.size.size = 100MB
appender.custom.strategy.type = DefaultRolloverStrategy
appender.custom.strategy.max = 5